<html>
<head>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Innova</title>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link href="/modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/modules/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" rel="stylesheet" />
    <link href="~/css/StyleSheet.css" rel="stylesheet" />
    <link href="~/css/jquery.inputpicker.css" rel="stylesheet" />
    <link href="/modules/bootstrap-select/dist/css/bootstrap-select.css" rel="stylesheet" />

    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
    <!-- Material Kit CSS -->
    <link href="assets/css/material-dashboard.css?v=2.1.1" rel="stylesheet" />

    <script src="/modules/jquery/dist/jquery.min.js"></script>
    <script src="/modules/popper.js/dist/umd/popper.min.js"></script>
    <script src="/modules/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
    <script src="/modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="~/js/jquery.inputpicker.js"></script>
    <script src="/modules/bootstrap-select/dist/js/bootstrap-select.js"></script>






</head>
<body>
    <partial name="_navbar" />
    <div class="container pt-100 mb-5">
        @RenderBody()
    </div>


    <script type="text/javascript">

        $('#filtreTarih1').datepicker({
            language: "tr",
            daysOfWeekHighlighted: "1",
            calendarWeeks: true,
            autoclose: true,
            todayHighlight: true,
            clearBtn: true
        });

        $('#filtreTarih2').datepicker({
            language: "tr",
            daysOfWeekHighlighted: "1",
            calendarWeeks: true,
            autoclose: true,
            todayHighlight: true,
            clearBtn: true
        });

    </script>

    <script type="text/javascript">

        //$("LoadingStatus").html("Loading...");

        //$.get("RequestOrder/GetTalepList", null, DataBind);
        //function DataBind(TalepList) {
        //    var SetData = $('#TalepListTable');
        //    for (var i = 0; i < TalepList.length; i++) {

        //        console.log(TalepList[i].guid)
        //        var Data = "<tr class='row_'" + TalepList[i].Id + "'>" +
        //            "<td>" + TalepList[i].sube + "</td>" +
        //            "<td>" + TalepList[i].belgeNo + "</td>" +
        //            "<td>" + TalepList[i].tarih + "</td>" +
        //            "<td>" + TalepList[i].aciklama + "</td>" +
        //            "<td>" + TalepList[i].belgeDurum + "</td>" +
        //            "<td>" + "<a href='#' class='btn btn-block btn-info' onclick='EditTalep(" + TalepList[i].belgeNo + ")'><i class='far fa-eye'></i></span></a>" + "</td>"

        //            "</tr>";
        //        SetData.append(Data);
        //        $("#LoadingStatus").html("  ");


        //    }
        //}

        //$.get("RequestOrder/GetTalepList", null, DataBind);
        //function DataBind(TalepList) {
        //    console.log("asaasas");
        //    console.log(TalepList.length);
        //    var SetData = $('#SetTalepList');
        //    for (var i = 0; i < TalepList.length; i++) {

        //        console.log(TalepList[i].guid)
        //        var Data = "<tr class='row_'" + TalepList[i].Id + "'>" +
        //            "<td>" + TalepList[i].sira + "</td>" +
        //            "<td>" + TalepList[i].stokKodu + "</td>" +
        //            "<td>" + TalepList[i].stokAdi + "</td>" +
        //            "<td>" + TalepList[i].birim + "</td>" +
        //            "<td>" + TalepList[i].miktar + "</td>" +
        //            "<td>" + "<a href='#' class='btn btn-warning' onclick='EditTalep(" + TalepList[i].id + ")'><i class='far fa-edit'></i> </span></a>" + "</td>" +
        //            "<td>" + "<a href='#' class='btn btn-danger' onclick='DeleteTalep(" + TalepList[i].id + ")'><i class='far fa-trash-alt'></i> </span></a>" + "</td>" +
        //            "</tr>";
        //        SetData.append(Data);
        //        $("#LoadingStatus").html("  ");


        //    }
        //}

        function TalepListele() {
            $("LoadingStatus").html("Loading...");

            $.get("RequestOrder/GetTalepList", null, DataBind);
            function DataBind(TalepList) {
                var SetData = $('#TalepListTable');
                for (var i = 0; i < TalepList.length; i++) {

                    console.log(TalepList[i].guid)
                    var Data = "<tr class='row_'" + TalepList[i].Id + "'>" +
                        "<td>" + TalepList[i].sube + "</td>" +
                        "<td>" + TalepList[i].belgeNo + "</td>" +
                        "<td>" + TalepList[i].tarih + "</td>" +
                        "<td>" + TalepList[i].aciklama + "</td>" +
                        "<td>" + TalepList[i].belgeDurum + "</td>" +
                        "<td>" + "<a href='#' class='btn btn-block btn-info' onclick='EditTalep(" + TalepList[i].belgeNo + ")'><i class='far fa-eye'></i></span></a>" + "</td>"

                    "</tr>";
                    SetData.append(Data);
                    $("#LoadingStatus").html("  ");


                }
            }
        }



        $('#btnList').click(function () {
            var data = $('#filterListForm').serialize();
            console.log(data);
            $.get("RequestOrder/GetTalepList", data, DataBind);
            $("#TalepListTable").empty();
            function DataBind(TalepList) {
                var SetData = $('#TalepListTable');
                for (var i = 0; i < TalepList.length; i++) {

                    console.log(TalepList[i].guid)
                    var Data = "<tr class='row_'" + TalepList[i].Id + "'>" +
                        "<td>" + TalepList[i].sube + "</td>" +
                        "<td>" + TalepList[i].belgeNo + "</td>" +
                        "<td>" + TalepList[i].tarih + "</td>" +
                        "<td>" + TalepList[i].aciklama + "</td>" +
                        "<td>" + TalepList[i].belgeDurum + "</td>" +
                        "<td>" + "<a href='RequestOrder/Detail/?belgeNo=" + TalepList[i].belgeNo + "' class='btn btn-block btn-info' ><i class='far fa-eye'></i></span></a>" + "</td>"

                    "</tr>";
                    SetData.append(Data);
                    $("#LoadingStatus").html("  ");


                }
            }

        });


        $('#btnAddNew').click(function () {
            window.location.href = "/RequestOrder/Detail?belgeNo=&subeId=" + $("#drpSube").val();
        });

        $('#btnClear').click(function () {
            $('#filterListForm').trigger("reset");
            $("#drpSube").val(1);
        });

        function AddNewTalep(TalepId) {
            $("#form")[0].reset();
            $("#ModalTitle").html("Yeni Kayıt Ekle");
            $("#MyModal").modal();
        }




    </script>


    <script>
        $(function () {
            var getSelectedValue = function () {
                var activeRow = $("tr.active");
                var firstColumn = $("td:nth-child(1)", activeRow).text();
                var secondColumn = $("td:nth-child(2)", activeRow).text();
                var entry = firstColumn + " (" + secondColumn + ")";
                return entry;
            }
            $("#SearchTerm")
                .on("focusout", function (e) {
                    $(".suggestions").addClass("hidden");
                })
                .on("keyup keypress",
                    function (e) {
                        var active = $("tr.active", ".suggest-grid");
                        if (e.which === 27) {
                            $(".suggestions").addClass("hidden");
                        } else if (e.which === 40) {
                            if (active.length > 0) {
                                var next = $(active).next();
                                $(active).removeClass("active");
                                $(next).addClass("active");
                            } else {
                                $("tr:first", ".suggest-grid").addClass("active");
                            }
                        } else if (e.which === 38) {
                            if (active.length > 0) {
                                var previous = $(active).prev();
                                $(active).removeClass("active");
                                $(previous).addClass("active");
                            } else {
                                $("tr:last", ".suggest-grid").addClass("active");
                            }
                        } else if (e.which === 13) {
                            e.preventDefault();
                            var selectedValue = getSelectedValue();
                            $(this).val(selectedValue);
                            $(".suggestions").addClass("hidden");
                            return false;
                        } else {
                            // We have a good value w/ no special keys.
                            var value = $("#SearchTerm").val();
                            if (value === "") {
                                $(".suggestions").addClass("hidden");
                            } else {
                                var uri = "/api/search/for/" + value;
                                $(".suggestions").removeClass("hidden");
                                $.getJSON(uri)
                                    .done(function (data) {
                                        var grid = $(".suggest-grid");
                                        $("tbody", grid).empty();
                                        $.each(data,
                                            function (key, value) {
                                                var row =
                                                    "<td>" + value.Make + "</td>" +
                                                    "<td>" + value.Model + "</td>";
                                                $("tbody", grid).append($("<tr></tr>").html(row));
                                                // On mouse click, set the value.
                                                $("tr", grid).on("click",
                                                    function (e) {
                                                        e.preventDefault();
                                                        // this = the row (tr)
                                                        // Grabs the first column's value.
                                                        var selectedValue = getSelectedValue();
                                                        $(".search-term").val(selectedValue);
                                                        $(".suggestions").addClass("hidden");
                                                    });
                                            });
                                    });
                            }
                        }
                    });
        });
    </script>

    <script>
        $('#demo').inputpicker({
            data: [
                { value: "1", text: "jQuery", description: "This is the description of the text 1." },
                { value: "2", text: "Script", description: "This is the description of the text 2." },
                { value: "3", text: "Net", description: "This is the description of the text 3." }
            ],
            fields: [
                { name: 'value', text: 'Id' },
                { name: 'text', text: 'Title' },
                { name: 'description', text: 'Description' }
            ],
            headShow: true,
            fieldText: 'text',
            fieldValue: 'value'
        });

        $('#btnDeneme').click(function () {
            $('#filterListForm').trigger("reset");
        });
    </script>

</body>
</html>
